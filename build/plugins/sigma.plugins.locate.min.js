(function(){"use strict";function a(){var a,b,c={},d=arguments.length;for(a=d-1;a>=0;a--)for(b in arguments[a])c[b]=arguments[a][b];return c}function b(b,c){e=this,f=b,g=a(c,d),g.zoomDef=g.zoomDef||f.settings("zoomMax")}function c(a,b,c,d){if(void 0===a||isNaN(a)||"number"!=typeof a)throw"minX must be a number.";if(void 0===b||isNaN(b)||"number"!=typeof b)throw"maxX must be a number.";if(void 0===c||isNaN(c)||"number"!=typeof c)throw"minY must be a number.";if(void 0===d||isNaN(d)||"number"!=typeof d)throw"maxY must be a number.";var e,h,i,j,k,l;e=.5*(a+b),h=.5*(c+d),l=f.camera.getRectangle(b-a,d-c),j=l.x2-l.x1||1,k=l.height||1,i=sigma.utils.getBoundaries(f.graph,f.camera.readPrefix);var m,n,o=i.maxY+i.sizeMax,p=i.maxX+i.sizeMax,q=f.settings("zoomMax");if(m=k/o,n=j/p,q=f.settings("autoRescale")?Math.max(f.settings("zoomMin"),Math.min(f.settings("zoomMax"),f.camera.ratio/Math.min(m,n))):g.zoomDef,void 0===e||void 0===h)throw"Coordinates error.";return{x:e,y:h,ratio:q}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var d={focusOut:!1,zoomDef:null},e=null,f=null,g=null;b.prototype.nodes=function(a,b){if(arguments.length<1)throw"locate.nodes: Wrong arguments.";if(3===arguments.length&&"object"!=typeof b)throw"locate.nodes: options must be an object.";{var d;f.camera.ratio}if("string"==typeof a){var e=f.graph.nodes(a);d={x:e[s.camera.readPrefix+"x"],y:e[s.camera.readPrefix+"y"],ratio:f.settings("autoRescale")?f.settings("zoomMin"):g.zoomDef}}else{if("[object Array]"!==Object.prototype.toString.call(a))throw"locate.nodes: Wrong arguments.";var h,i,j,k;h=Math.min.apply(Math,a.map(function(a){return a[s.camera.readPrefix+"x"]})),i=Math.max.apply(Math,a.map(function(a){return a[s.camera.readPrefix+"x"]})),j=Math.min.apply(Math,a.map(function(a){return a[s.camera.readPrefix+"y"]})),k=Math.max.apply(Math,a.map(function(a){return a[s.camera.readPrefix+"y"]})),d=c(h,i,j,k)}g.focusOut&&f.settings("autoRescale")?sigma.misc.animation.camera(s.camera,{x:.5*(f.camera.x+d.x),y:.5*(f.camera.y+d.y),ratio:g.zoomDef},{duration:800,onComplete:function(){sigma.misc.animation.camera(f.camera,d,b)}}):sigma.misc.animation.camera(f.camera,d,b)},b.prototype.edges=function(a,b){if(arguments.length<1)throw"locate.edges: Wrong arguments.";if(3===arguments.length&&"object"!=typeof b)throw"locate.edges: options must be an object.";{var d;f.camera.ratio}if("string"==typeof a){var e,h,i,j,k=f.graph.edges(a),l=f.graph.nodes(k.source),m=f.graph.nodes(k.target);e=Math.min(l[s.camera.readPrefix+"x"],m[s.camera.readPrefix+"x"]),h=Math.max(l[s.camera.readPrefix+"x"],m[s.camera.readPrefix+"x"]),i=Math.min(l[s.camera.readPrefix+"y"],m[s.camera.readPrefix+"y"]),j=Math.max(l[s.camera.readPrefix+"y"],m[s.camera.readPrefix+"y"]),d=c(e,h,i,j)}else{if("[object Array]"!==Object.prototype.toString.call(a))throw"locate.edges: Wrong arguments.";var e,h,i,j;e=Math.min.apply(Math,a.map(function(a){return Math.min(a.source[s.camera.readPrefix+"x"],a.target[s.camera.readPrefix+"x"])})),h=Math.max.apply(Math,a.map(function(a){return Math.min(a.source[s.camera.readPrefix+"x"],a.target[s.camera.readPrefix+"x"])})),i=Math.min.apply(Math,a.map(function(a){return Math.min(a.source[s.camera.readPrefix+"y"],a.target[s.camera.readPrefix+"y"])})),j=Math.max.apply(Math,a.map(function(a){return Math.min(a.source[s.camera.readPrefix+"y"],a.target[s.camera.readPrefix+"y"])})),d=c(e,h,i,j,s)}g.focusOut&&f.settings("autoRescale")?sigma.misc.animation.camera(s.camera,{x:.5*(f.camera.x+d.x),y:.5*(f.camera.y+d.y),ratio:g.zoomDef},{duration:800,onComplete:function(){sigma.misc.animation.camera(f.camera,d,b)}}):sigma.misc.animation.camera(f.camera,d,b)},b.prototype.center=function(a,b){f.graph.nodes().length?e.nodes(f.graph.nodes(),{duration:800}):sigma.misc.animation.camera(f.camera,{x:0,y:0,ratio:a},b)},sigma.plugins.locate=function(a,c){return e||(e=new b(a,c)),e},sigma.plugins.killLocate=function(){e=null,g=null,f=null}}).call(window);