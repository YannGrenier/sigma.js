(function(){"use strict";function a(){var a,b,c={},d=arguments.length;for(a=d-1;a>=0;a--)for(b in arguments[a])c[b]=arguments[a][b];return c}function b(b,c){e=this,f=b,g=a(c,d),g.zoomDef=g.zoomDef||f.settings("zoomMax")}function c(a,b,c,d){if(void 0===a||isNaN(a)||"number"!=typeof a)throw"minX must be a number.";if(void 0===b||isNaN(b)||"number"!=typeof b)throw"maxX must be a number.";if(void 0===c||isNaN(c)||"number"!=typeof c)throw"minY must be a number.";if(void 0===d||isNaN(d)||"number"!=typeof d)throw"maxY must be a number.";var e,h,i,j,k,l;e=.5*(a+b),h=.5*(c+d),l=f.camera.getRectangle(b-a,d-c),j=l.x2-l.x1||1,k=l.height||1,i=sigma.utils.getBoundaries(f.graph,f.camera.readPrefix);var m,n,o=i.maxY+i.sizeMax,p=i.maxX+i.sizeMax,q=f.settings("zoomMax");if(m=k/o,n=j/p,q=f.settings("autoRescale")?Math.max(f.settings("zoomMin"),Math.min(f.settings("zoomMax"),f.camera.ratio/Math.min(m,n))):g.zoomDef,void 0===e||void 0===h)throw"Coordinates error.";return{x:e,y:h,ratio:q}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var d={animation:{node:{duration:300},edge:{duration:300},center:{duration:300}},focusOut:!1,zoomDef:null},e=null,f=null,g=null;b.prototype.nodes=function(b,d){if(arguments.length<1)throw"locate.nodes: Wrong arguments.";if(3===arguments.length&&"object"!=typeof d)throw"locate.nodes: options must be an object.";{var e,h,i=a(d,g.animation.node);f.camera.ratio}if("string"==typeof b){if(h=f.graph.nodes(b),void 0===h)throw"locate.nodes: Wrong arguments.";e={x:h[f.camera.readPrefix+"x"],y:h[f.camera.readPrefix+"y"],ratio:f.settings("autoRescale")?f.settings("zoomMin"):g.zoomDef}}else{if("[object Array]"!==Object.prototype.toString.call(b))throw"locate.nodes: Wrong arguments.";var j,k,l,m;j=Math.min.apply(Math,b.map(function(a){if(h=f.graph.nodes(a),void 0===h)throw"locate.nodes: Wrong arguments.";return h[f.camera.readPrefix+"x"]})),k=Math.max.apply(Math,b.map(function(a){if(h=f.graph.nodes(a),void 0===h)throw"locate.nodes: Wrong arguments.";return h[f.camera.readPrefix+"x"]})),l=Math.min.apply(Math,b.map(function(a){if(h=f.graph.nodes(a),void 0===h)throw"locate.nodes: Wrong arguments.";return h[f.camera.readPrefix+"y"]})),m=Math.max.apply(Math,b.map(function(a){if(h=f.graph.nodes(a),void 0===h)throw"locate.nodes: Wrong arguments.";return h[f.camera.readPrefix+"y"]})),e=c(j,k,l,m)}return g.focusOut&&f.settings("autoRescale")?sigma.misc.animation.camera(s.camera,{x:.5*(f.camera.x+e.x),y:.5*(f.camera.y+e.y),ratio:g.zoomDef},{duration:i.duration,onComplete:function(){sigma.misc.animation.camera(f.camera,e,i)}}):sigma.misc.animation.camera(f.camera,e,i),this},b.prototype.edges=function(b,d){if(arguments.length<1)throw"locate.edges: Wrong arguments.";if(3===arguments.length&&"object"!=typeof d)throw"locate.edges: options must be an object.";{var e,h,i=a(d,g.animation.edge);f.camera.ratio}if("string"==typeof b){if(h=f.graph.edges(b),void 0===h)throw"locate.edges: Wrong arguments.";var j,k,l,m,n=f.graph.nodes(h.source),o=f.graph.nodes(h.target);j=Math.min(n[f.camera.readPrefix+"x"],o[f.camera.readPrefix+"x"]),k=Math.max(n[f.camera.readPrefix+"x"],o[f.camera.readPrefix+"x"]),l=Math.min(n[f.camera.readPrefix+"y"],o[f.camera.readPrefix+"y"]),m=Math.max(n[f.camera.readPrefix+"y"],o[f.camera.readPrefix+"y"]),e=c(j,k,l,m)}else{if("[object Array]"!==Object.prototype.toString.call(b))throw"locate.edges: Wrong arguments.";var j,k,l,m,p=b.map(function(a){if(h=f.graph.edges(a),void 0===h)throw"locate.edges: Wrong arguments.";return[f.graph.nodes(h.source)[f.camera.readPrefix+"x"],f.graph.nodes(h.target)[f.camera.readPrefix+"x"]]});p=[].concat.apply([],p);var q=b.map(function(a){if(h=f.graph.edges(a),void 0===h)throw"locate.edges: Wrong arguments.";return[f.graph.nodes(h.source)[f.camera.readPrefix+"y"],f.graph.nodes(h.target)[f.camera.readPrefix+"y"]]});q=[].concat.apply([],q),j=Math.min.apply(Math,p),k=Math.max.apply(Math,p),l=Math.min.apply(Math,q),m=Math.max.apply(Math,q),e=c(j,k,l,m)}return g.focusOut&&f.settings("autoRescale")?sigma.misc.animation.camera(s.camera,{x:.5*(f.camera.x+e.x),y:.5*(f.camera.y+e.y),ratio:g.zoomDef},{duration:i.duration,onComplete:function(){sigma.misc.animation.camera(f.camera,e,i)}}):sigma.misc.animation.camera(f.camera,e,i),this},b.prototype.center=function(b,c){var d=a(c,g.animation.center);return f.graph.nodes().length?e.nodes(f.graph.nodes().map(function(a){return a.id}),d):sigma.misc.animation.camera(f.camera,{x:0,y:0,ratio:b},d),this},sigma.plugins.locate=function(a,c){return e||(e=new b(a,c)),e},sigma.plugins.killLocate=function(){e=null,g=null,f=null}}).call(window);