(function(){"use strict";function a(){var a,b,c={},d=arguments.length;for(a=d-1;a>=0;a--)for(b in arguments[a])c[b]=arguments[a][b];return c}function b(a,b,d,e,g){if(c(),f=document.createElement("div"),d.renderer){var h,i,j=Object.create(null);for(i in b)j[i]=b[i];h=d.renderer.call(a.graph,j,d.template),"string"==typeof h?f.innerHTML=h:f.appendChild(h)}else f.innerHTML=d.template;f.className=d.cssClass,f.style.position="absolute",f.style.left=e+"px",f.style.top=g+"px",a.renderers[0].container.appendChild(f);var k=document.body.getBoundingClientRect(),l=f.getBoundingClientRect(),m=l.top-k.top,n=k.bottom-l.bottom,o=l.left-k.left,p=k.right-l.right;"top"===d.position?(f.className=d.cssClass+" top",f.style.left=e-(l.right-l.left)/2+"px",f.style.top=g-(l.bottom-l.top)+"px"):"bottom"===d.position?(f.className=d.cssClass+" bottom",f.style.left=e-(l.right-l.left)/2+"px",f.style.top=g+"px"):"left"===d.position?(f.className=d.cssClass+" left",f.style.left=e-(l.right-l.left)+"px",f.style.top=g-(l.bottom-l.top)/2+"px"):"right"===d.position&&(f.className=d.cssClass+" right",f.style.left=e+"px",f.style.top=g-(l.bottom-l.top)/2+"px"),l=f.getBoundingClientRect(),m=l.top-k.top,n=k.bottom-l.bottom,o=l.left-k.left,p=k.right-l.right,d.autoadjust&&(0>n?(f.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(f.className=d.cssClass+" top"),f.style.top=g-l.bottom+l.top+"px"):0>m&&(f.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(f.className=d.cssClass+" bottom"),f.style.top=g+"px"),0>p?(f.className=d.cssClass,("left"===d.position||"right"===d.position)&&(f.className=d.cssClass+" left"),f.style.left=e-l.right+l.left+"px"):0>o&&(f.className=d.cssClass,("left"===d.position||"right"===d.position)&&(f.className=d.cssClass+" right"),f.style.left=e+"px"))}function c(){f&&f.parentNode&&(f.parentNode.removeChild(f),f=null)}function d(){clearTimeout(g),g=!1,c()}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins"),sigma.utils.pkg("sigma.plugins.popup");var e,f,g,h={stage:{show:"rightClickStage",hide:"clickStage",cssClass:"sigma-popup",position:"",autoadjust:!1,delay:0,template:"",renderer:null},node:{show:"clickNode",hide:"clickStage",cssClass:"sigma-popup",position:"",autoadjust:!1,delay:0,template:"",renderer:null},edge:{show:"clickEdge",hide:"clickStage",cssClass:"sigma-popup",position:"",autoadjust:!1,delay:0,template:"",renderer:null},doubleClickDelay:800},i=!1;sigma.plugins.popup=function(c,j){if(void 0!==e)return e;e=this;var k=a(j.stage,h.stage),l=a(j.node,h.node),m=a(j.edge,h.edge);if(sigma.classes.dispatcher.extend(this),this.close=function(){return d(),this},j.stage){if(void 0!==j.stage.renderer&&"function"!=typeof j.stage.renderer)throw"The render of the stage popup must be a function.";if(void 0!==j.stage.position&&"top"!==j.stage.position&&"bottom"!==j.stage.position&&"left"!==j.stage.position&&"right"!==j.stage.position)throw"The value of options.position must be either: top, bottom, left, right.";c.bind(k.show,function(a){if("doubleClickStage"===k.show||!i){var d=a.data.captor.clientX,f=a.data.captor.clientY;clearTimeout(g),g=setTimeout(function(){b(c,null,k,d,f),e.dispatchEvent("shown")},k.delay)}}),c.bind(k.hide,function(){var a=f;d(),a&&e.dispatchEvent("hidden")}),"doubleClickStage"!==k.show&&c.bind("doubleClickStage",function(){d(),i=!0,e.dispatchEvent("hidden"),setTimeout(function(){i=!1},h.doubleClickDelay)})}if(j.node){if(void 0!==j.node.renderer&&"function"!=typeof j.node.renderer)throw"The render of the node popup must be a function.";if(void 0!==j.node.position&&"top"!==j.node.position&&"bottom"!==j.node.position&&"left"!==j.node.position&&"right"!==j.node.position)throw"The value of options.position must be either: top, bottom, left, right.";c.bind(l.show,function(a){if("doubleClickNode"===l.show||!i){var d=a.data.node||a.data.nodes[0],f=a.data.captor.clientX,h=a.data.captor.clientY;clearTimeout(g),g=setTimeout(function(){b(c,d,l,f,h),e.dispatchEvent("shown")},l.delay)}}),c.bind(l.hide,function(){var a=f;d(),a&&e.dispatchEvent("hidden")}),"doubleClickNode"!==l.show&&c.bind("doubleClickNode",function(){d(),i=!0,e.dispatchEvent("hidden"),setTimeout(function(){i=!1},h.doubleClickDelay)})}if(j.edge){if(void 0!==j.edge.renderer&&"function"!=typeof j.edge.renderer)throw"The render of the edge popup must be a function.";if(void 0!==j.edge.position&&"top"!==j.edge.position&&"bottom"!==j.edge.position&&"left"!==j.edge.position&&"right"!==j.edge.position)throw"The value of options.position must be either: top, bottom, left, right.";c.bind(m.show,function(a){if("doubleClickEdge"===m.show||!i){var d=a.data.edge||a.data.edges[0],f=a.data.captor.clientX,h=a.data.captor.clientY;clearTimeout(g),g=setTimeout(function(){b(c,d,m,f,h),e.dispatchEvent("shown")},m.delay)}}),c.bind(m.hide,function(){var a=f;d(),a&&e.dispatchEvent("hidden")}),"doubleClickEdge"!==m.show&&c.bind("doubleClickEdge",function(){d(),i=!0,e.dispatchEvent("hidden"),setTimeout(function(){i=!1},h.doubleClickDelay)})}return("rightClickNode"===l.show||"rightClickEdge"===m.show)&&c.renderers[0].container.addEventListener("contextmenu",function(a){a.preventDefault()}),this}}).call(window);