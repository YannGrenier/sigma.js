(function(){"use strict";function a(){var a,b,c={},d=arguments.length;for(a=d-1;a>=0;a--)for(b in arguments[a])c[b]=arguments[a][b];return c}function b(a,b,d,f,g){if(c(),e=document.createElement("div"),d.renderer){var h,i=Object.create(null);for(h in b)i[h]=b[h];e.innerHTML=d.renderer.call(a.graph,i,d.template)}else e.innerHTML=d.template;e.className=d.cssClass,e.style.position="absolute",e.style.left=f+"px",e.style.top=g+"px",a.renderers[0].container.appendChild(e);var j=document.body.getBoundingClientRect(),k=e.getBoundingClientRect(),l=k.top-j.top,m=j.bottom-k.bottom,n=k.left-j.left,o=j.right-k.right;"top"===d.position?(e.className=d.cssClass+" top",e.style.left=f-(k.right-k.left)/2+"px",e.style.top=g-(k.bottom-k.top)+"px"):"bottom"===d.position?(e.className=d.cssClass+" bottom",e.style.left=f-(k.right-k.left)/2+"px",e.style.top=g+"px"):"left"===d.position?(e.className=d.cssClass+" left",e.style.left=f-(k.right-k.left)+"px",e.style.top=g-(k.bottom-k.top)/2+"px"):"right"===d.position&&(e.className=d.cssClass+" right",e.style.left=f+"px",e.style.top=g-(k.bottom-k.top)/2+"px"),k=e.getBoundingClientRect(),l=k.top-j.top,m=j.bottom-k.bottom,n=k.left-j.left,o=j.right-k.right,d.autoadjust&&(0>m?(e.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(e.className=d.cssClass+" top"),e.style.top=g-k.bottom+k.top+"px"):0>l&&(e.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(e.className=d.cssClass+" bottom"),e.style.top=g+"px"),0>o?(e.className=d.cssClass,("left"===d.position||"right"===d.position)&&(e.className=d.cssClass+" left"),e.style.left=f-k.right+k.left+"px"):0>n&&(e.className=d.cssClass,("left"===d.position||"right"===d.position)&&(e.className=d.cssClass+" right"),e.style.left=f+"px"))}function c(){e&&e.parentNode&&(e.parentNode.removeChild(e),e=null)}function d(){clearTimeout(f),f=!1,c()}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins"),sigma.utils.pkg("sigma.plugins.popup");var e,f,g={stage:{show:"rightClickStage",hide:"clickStage",cssClass:"sigma-popup",position:"",autoadjust:!1,delay:0,template:"",renderer:null},node:{show:"clickNode",hide:"clickStage",cssClass:"sigma-popup",position:"",autoadjust:!1,delay:0,template:"",renderer:null},edge:{show:"clickEdge",hide:"clickStage",cssClass:"sigma-popup",position:"",autoadjust:!1,delay:0,template:"",renderer:null},doubleClickDelay:800},h=!1;sigma.plugins.popup=function(c,e){var i=a(e.stage,g.stage),j=a(e.node,g.node),k=a(e.edge,g.edge);if(e.stage){if(void 0!==e.stage.renderer&&"function"!=typeof e.stage.renderer)throw"The render of the stage popup must be a function.";if(void 0!==e.stage.position&&"top"!==e.stage.position&&"bottom"!==e.stage.position&&"left"!==e.stage.position&&"right"!==e.stage.position)throw"The value of options.position must be either: top, bottom, left, right.";c.bind(i.show,function(a){if("doubleClickStage"===i.show||!h){var d=a.data.captor.clientX,e=a.data.captor.clientY;clearTimeout(f),f=setTimeout(function(){b(c,null,i,d,e)},i.delay)}}),c.bind(i.hide,function(){d()}),"doubleClickStage"!==i.show&&c.bind("doubleClickStage",function(){d(),h=!0,setTimeout(function(){h=!1},g.doubleClickDelay)})}if(e.node){if(void 0!==e.node.renderer&&"function"!=typeof e.node.renderer)throw"The render of the node popup must be a function.";if(void 0!==e.node.position&&"top"!==e.node.position&&"bottom"!==e.node.position&&"left"!==e.node.position&&"right"!==e.node.position)throw"The value of options.position must be either: top, bottom, left, right.";c.bind(j.show,function(a){if("doubleClickNode"===j.show||!h){var d=a.data.node||a.data.nodes[0],e=a.data.captor.clientX,g=a.data.captor.clientY;clearTimeout(f),f=setTimeout(function(){b(c,d,j,e,g)},j.delay)}}),c.bind(j.hide,function(){d()}),"doubleClickNode"!==j.show&&c.bind("doubleClickNode",function(){d(),h=!0,setTimeout(function(){h=!1},g.doubleClickDelay)})}if(e.edge){if(void 0!==e.edge.renderer&&"function"!=typeof e.edge.renderer)throw"The render of the edge popup must be a function.";if(void 0!==e.edge.position&&"top"!==e.edge.position&&"bottom"!==e.edge.position&&"left"!==e.edge.position&&"right"!==e.edge.position)throw"The value of options.position must be either: top, bottom, left, right.";c.bind(k.show,function(a){if("doubleClickEdge"===k.show||!h){var d=a.data.edge||a.data.edges[0],e=a.data.captor.clientX,g=a.data.captor.clientY;clearTimeout(f),f=setTimeout(function(){b(c,d,k,e,g)},k.delay)}}),c.bind(k.hide,function(){d()}),"doubleClickEdge"!==k.show&&c.bind("doubleClickEdge",function(){d(),h=!0,setTimeout(function(){h=!1},g.doubleClickDelay)})}("rightClickNode"===j.show||"rightClickEdge"===k.show)&&c.renderers[0].container.addEventListener("contextmenu",function(a){a.preventDefault()})}}).call(window);